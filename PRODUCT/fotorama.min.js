/*!
 * Fotorama 4.0.0 | MIT License
 */(function(window,document,$,undefined){function noop(){}function getOrientationKeys(t){return"vertical"===t?{_pos:"top",_pos2:"left",_coo:"_y",_coo2:"_x",_side:"height",_side2:"width"}:{_pos:"left",_pos2:"top",_coo:"_x",_coo2:"_y",_side:"width",_side2:"height"}}function minMaxLimit(t,e,a){return Math.max("number"!=typeof e?-1/0:e,Math.min("number"!=typeof a?1/0:a,t))}function readTransform(t,e){return t.match(/-?\d+/g)["left"===e?4:5]}function readPosition(t,e,a){return CSSTR&&a?Number(readTransform(t.css("transform"),e)):Number(t.css(e).replace("px",""))}function getTranslate(t,e,a){var o={};return CSSTR&&a?o.transform="left"===e?"translate3d("+t+"px,0,0)":"translate3d(0,"+t+"px,0)":(o[e]=t,o["left"===e?"top":"left"]=0),o}function getDuration(t){return{"transition-duration":t+"ms"}}function numberFromMeasure(t,e){return t=Number((t+"").replace(e||"px","")),isNaN(t)?!1:t}function numberFromPercent(t){var e=numberFromMeasure(t,"%");return e&&/%$/.test(t)?e:!1}function measureIsValid(t){return numberFromMeasure(t)||numberFromMeasure(t,"%")?t:!1}function capitaliseFirstLetter(t){return t&&t.charAt(0).toUpperCase()+t.slice(1)}function getPosByIndex(t,e,a,o){return(t-(o||0))*(e+(a||0))}function getIndexByPos(t,e,a,o){return-Math.round(t/(e+(a||0))-(o||0))}function getRandomInt(t,e){return Math.floor(Math.random()*(e-t+1))+t}function bindTransitionEnd(t){var e=t.data();if(!e.transEnd){var a=t.get(0),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};a.addEventListener(o[Modernizr.prefixed("transition")],function(t){var a=e.transProp;(a.match(t.propertyName)||a.match("all"))&&(e.transProp=a.replace(t.propertyName,""),e.onEndFn.call(this))}),e.transEnd=!0}}function afterTransition(t,e,a){var o,n=t.data();n.transProp=t.css("transition-property"),n.onEndFn=function(){o=!0,e.call(this)},bindTransitionEnd(t),clearTimeout(n.transTimeout),a&&(n.transTimeout=setTimeout(function(){o||(t.data().onEndFn=noop,e.call(t.get(0)))},1.1*a))}function stop(t,e,a){CSSTR&&a?(t.css(getDuration(0)),afterTransition(t,noop)):t.stop();var o=readPosition(t,e,a);return t.css(getTranslate(o,e,a)),o}function edgeResistance(t,e){return Math.round(t+(e-t)/1.5)}function getProtocol(){return getProtocol.protocol=getProtocol.protocol||("https://"===location.protocol?"https://":"http://"),getProtocol.protocol}function parseHref(t){var e=document.createElement("a");return e.href=t,e}function findVideoId(t,e){if(t!==undefined){t=parseHref(t);var a,o;if(t.host.match("youtube.com")&&t.search){if(a=t.search.split("v=")[1]){var n=a.indexOf("&");-1!==n&&(a=a.substring(0,n)),o="youtube"}}else"youtube.com"===t.host||"youtu.be"===t.host?(a=t.pathname.replace(/^\/(embed\/|v\/)?/,"").replace(/\/.*/,""),o="youtube"):("vimeo.com"===t.host||"player.vimeo.com"===t.host)&&(o="vimeo",a=t.pathname.replace(/^\/(video\/)?/,"").replace(/\/.*/,""));return a&&o||!e||(a=t.href,o="custom"),a?{id:a,type:o}:!1}}function getVideoThumbs(t,e,a,o){var n,r,s=t.video;return"youtube"===s.type?(r=getProtocol()+"img.youtube.com/vi/"+s.id+"/default.jpg",n=r.replace(/\/default.jpg$/,"/hqdefault.jpg"),t.thumbsReady=!0):"vimeo"===s.type?$.ajax({url:getProtocol()+"vimeo.com/api/v2/video/"+s.id+".json",dataType:"jsonp",success:function(n){t.thumbsReady=!0,updateData(e,{img:n[0].thumbnail_large,thumb:n[0].thumbnail_small},a,o)}}):t.thumbsReady=!0,{img:n,thumb:r}}function updateData(t,e,a,o){for(var n=0,r=t.length;r>n;n++){var s=t[n];if(s.i===a&&s.thumbsReady){o.splice(n,1,{i:a,video:s.video,videoReady:!0,caption:s.caption,img:s.img||e.img,thumb:s.thumb||e.thumb});break}}}function getDataFromHtml(t){function e(t,e){var a=t.data(),o=t.children("img").eq(0),n=t.attr("href"),r=t.attr("src"),s=o.attr("src"),i=a.video,l=e?findVideoId(n,i===!0):!1;return l?n=!1:e&&(l=findVideoId(r,i===!0),l?r=!1:l=findVideoId(i,i)),{video:l,img:n||r||s,thumb:s||r||n,full:t.attr("data-full")||o.attr("data-full"),caption:t.attr("title")||o.attr("title"),fit:a.fit||o.data("fit"),id:t.attr("id")||o.attr("id")}}var a=[];return t.children().each(function(){var t=$(this),o=t.data();if(t.is("a, img"))o=e(t,!0);else{if(t.is(":empty"))return;o.html=this,o.caption=o.caption||t.attr("title")}a.push(o)}),a}function isHidden(t){return 0===t.offsetWidth&&0===t.offsetHeight}function waitFor(t,e,a){t()?e():setTimeout(function(){waitFor(t,e)},a||100)}function fit(t,e,a){var o=t.data(),n=o.measures;if(n&&(!o.last||o.last.mw!==n.width||o.last.mh!==n.height||o.last.mr!==n.ratio||o.last.mfw!==e.width__||o.last.mfh!==e.height__||o.last.mm!==a)){var r=n.width,s=n.height,i=e.width_/e.height_,l=n.ratio>=i,d=a===!0,u="contain"===a,c="cover"===a;l&&(d||u)||!l&&c?(r=minMaxLimit(e.width_,0,d?r:1/0),s=r/n.ratio):(l&&c||!l&&(d||u))&&(s=minMaxLimit(e.height_,0,d?s:1/0),r=s*n.ratio),t.css({width:Math.round(r),height:Math.round(s),marginLeft:Math.round(-r/2),marginTop:Math.round(-s/2)}),o.last={mw:n.width,mh:n.height,mr:n.ratio,mfw:e.width_,mfh:e.height_,mm:a}}}function findShadowEdge(t,e,a){return e===a?!1:e>=t?"left":t>=a?"right":"left right"}function getIndexFromHash(t,e,a){if(!a)return!1;var o=Number(t);if(!isNaN(o))return o-1;for(var n=0,r=e.length;r>n;n++){var s=e[n];if(s.id===t){o=n;break}}return o}function setHash(t,e){e||(setHash.on=!0,location.replace("#"+t),clearTimeout(setHash.timeout),setHash.timeout=setTimeout(function(){setHash.on=!1},100))}function smartClick(t,e,a){a=a||{},t.each(function(){var t,o=$(this),n=o.data();n.clickOn||(n.clickOn=!0,$.extend(touch(o,{onStart:function(e){t=e,(a.onStart||noop).call(this,e)},onMove:a.onMove||noop,onEnd:function(o){o.moved||a.tail.checked||e.call(this,t)}}),a.tail))})}function preventDefault(t){t.preventDefault()}function stopPropagation(t){t.stopPropagation()}function noInteraction(){return!1}function bindNoInteraction(t){return t.each(function(){$(this).off("mousedown mousemove mouseup").on("mousedown mousemove mouseup",noInteraction),TOUCH&&(this.removeEventListener("touchstart",noInteraction),this.removeEventListener("touchmove",noInteraction),this.removeEventListener("touchend",noInteraction),this.addEventListener("touchstart",noInteraction),this.addEventListener("touchmove",noInteraction),this.addEventListener("touchend",noInteraction))})}function bez(t){var e="bez_"+$.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof $.easing[e]){var a=function(t,e){var a=[null,null],o=[null,null],n=[null,null],r=function(r,s){return n[s]=3*t[s],o[s]=3*(e[s]-t[s])-n[s],a[s]=1-n[s]-o[s],r*(n[s]+r*(o[s]+r*a[s]))},s=function(t){return n[0]+t*(2*o[0]+3*a[0]*t)},i=function(t){for(var e,a=t,o=0;14>++o&&(e=r(a,0)-t,!(.001>Math.abs(e)));)a-=e/s(a);return a};return function(t){return r(i(t),1)}};$.easing[e]=function(e,o,n,r,s){return r*a([t[0],t[1]],[t[2],t[3]])(o/s)+n}}return e}function slide(t,e,a){var o=Math.round(e.pos),n=e.onEnd||noop;e.overPos!==undefined&&e.overPos!==e.pos&&(o=e.overPos,n=function(){slide(t,$.extend({},e,{overPos:e.pos,time:Math.max(TRANSITION_DURATION,e.time/2)}),a)});var r=getTranslate(o,e._pos,a);CSSTR&&a?(t.css(getDuration(e.time)).css(r),e.time>10?afterTransition(t,n,e.time):n()):t.stop().animate(r,e.time,BEZIER,n)}function fade(t,e,a,o){var n=t,r=e,s="crossfade"===a.method;fade.$el1=t=t||$(t),fade.$el2=e=e||$(e);var i=function(){i.done||fade.$el1!==t||fade.$el2!==e||(t.removeClass(fadeRearClass),e.removeClass(fadeFrontClass),(a.onEnd||noop)(),i.done=!0)},l=getDuration(a.time),d=getDuration(0),u={opacity:0},c={opacity:1};t.stop().css(d).addClass(fadeRearClass).removeClass(fadeFrontClass),e.stop().css(d).addClass(fadeFrontClass).removeClass(fadeRearClass),CSSTR&&o?(r&&t.css(s?u:c),setTimeout(function(){t.css(l).css(c),e.css(l).css(u)},4),a.time>10&&(n||r)?n?afterTransition(t,i,a.time):r&&afterTransition(e,i,a.time):i()):(r&&t.stop().fadeTo(0,s?0:1),t.stop().fadeTo(a.time,1,i),e.stop().fadeTo(a.time,0,i),n||r||i())}function extendEvent(t,e){t._x=e?t.touches[0].pageX:t.pageX,t._y=e?t.touches[0].pageY:t.pageY}function touch(t,e){function a(t){return u=$(t.target),m=!1,r||l||t.touches&&t.touches.length>1||t.which>1||h.prevent||lastEvent&&lastEvent.type!==t.type&&preventEvent||(m=e.select&&u.is(e.select,p))?h.prevent!==!0||m:(f=t.type.match("touch"),extendEvent(t,f),h.checked=s=d=!1,lastEvent=t,moveEventType=t.type.replace(/down|start/,"move"),i=t,c=h.control,(e.onStart||noop).call(p,t,{control:c,$target:u}),r=l=!0,f||t.preventDefault(),undefined)}function o(t){if(!r||t.touches&&t.touches.length>1)return n(),undefined;if(moveEventType===t.type){extendEvent(t,f);var a=Math.abs(t._x-i._x),o=Math.abs(t._y-i._y),l=a-o,u=l>=3,c=-3>=l;d||(d=!(h.noMove||!u&&!c)),f&&!h.checked?((u||c)&&(h.checked=!0,s="horizontal"===h.orientation?u:c),(!h.checked||s)&&t.preventDefault()):!f||s?(t.preventDefault(),(e.onMove||noop).call(p,t)):r=!1,h.checked=h.checked||u||c}}function n(t){l=h.control=!1,r&&(t&&t.preventDefault&&t.preventDefault(),preventEvent=!0,clearTimeout(preventEventTimeout),preventEventTimeout=setTimeout(function(){preventEvent=!1},1e3),(e.onEnd||noop).call(p,{moved:!!d,$target:u,control:c,startEvent:i}),r=!1)}var r,s,i,l,d,u,c,f,m,p=t.get(0),h={};return TOUCH&&(p.addEventListener("touchstart",a),p.addEventListener("touchmove",o),p.addEventListener("touchend",n)),t.on("mousedown",a),$DOCUMENT.on("mousemove",o).on("mouseup",n),t.on("click","a",function(t){h.checked&&t.preventDefault()}),h}function moveOnTouch(t,e){function a(a){s=i=a[w._coo],c=[[(new Date).getTime(),s]],l=d=stop(t,w._pos,w.css3),(e.onStart||noop).call(y,a,{pos:l})}function o(t,e){m=x.minPos,p=x.maxPos,h=x.snap,v=t.altKey,g=!1,_=e.control,_||a(t)}function n(o){_&&(_=!1,a(o)),i=o[w._coo],c.push([(new Date).getTime(),i]),d=l-(s-i),u=findShadowEdge(d,m,p),m>=d?d=edgeResistance(d,m):d>=p&&(d=edgeResistance(d,p)),w.noMove||(t.css(getTranslate(d,w._pos,w.css3)),g||(g=!0,$BODY.addClass("grabbing"))),(e.onMove||noop).call(y,o,{pos:d,edge:u})}function r(t){if(!_){$BODY.removeClass("grabbing"),f=(new Date).getTime();for(var a,o,n,r,s,u,g,$,x,S=f-TOUCH_TIMEOUT,w=null,T=TRANSITION_DURATION,F=e.friction,b=c.length-1;b>=0;b--){if(a=c[b][0],o=Math.abs(a-S),null===w||n>o)w=a,r=c[b][1];else if(w===S||o>n)break;n=o}g=minMaxLimit(d,m,p);var I=r-i,C=I>=0,M=f-w,A=TOUCH_TIMEOUT>=M&&d!==l&&g===d;h&&(g=minMaxLimit(Math[A?C?"floor":"ceil":"round"](d/h)*h,m,p),m=p=g),A&&(h||g===d)&&(x=-(I/M),T*=minMaxLimit(Math.abs(x),e.timeLow,e.timeHigh),s=Math.round(d+x*T/F),h||(g=s),(!C&&s>p||C&&m>s)&&(u=C?m:p,$=s-u,h||(g=u),$=minMaxLimit(g+.03*$,u-50,u+50),T=Math.abs((d-$)/(x/F)))),T*=v?10:1,(e.onEnd||noop).call(y,{pos:d,newPos:g,overPos:$,time:T,moved:t.moved,$target:t.$target,startEvent:t.startEvent})}}var s,i,l,d,u,c,f,m,p,h,v,_,g,y=t.get(0),x=t.data(),S=getOrientationKeys(e.orientation),w={_coo:S._coo,_pos:S._pos,css3:e.css3};return w=$.extend(touch(e.$wrap,{onStart:o,onMove:n,onEnd:r,select:e.select,control:e.control}),w)}_="undefined"==typeof _?{}:_;var escapeEntityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},escapeRegex=RegExp("[&<>\"'/]","g");_.escape=function(t){return null==t?"":(""+t).replace(escapeRegex,function(t){return escapeEntityMap[t]})};var Modernizr=function(t,e,a){function o(t){_.cssText=t}function n(t,e){return typeof t===e}function r(t,e){return!!~(""+t).indexOf(e)}function s(t,e){for(var o in t){var n=t[o];if(!r(n,"-")&&_[n]!==a)return"pfx"==e?n:!0}return!1}function i(t,e,o){for(var r in t){var s=e[t[r]];if(s!==a)return o===!1?t[r]:n(s,"function")?s.bind(o||e):s}return!1}function l(t,e,a){var o=t.charAt(0).toUpperCase()+t.slice(1),r=(t+" "+y.join(o+" ")+o).split(" ");return n(e,"string")||n(e,"undefined")?s(r,e):(r=(t+" "+x.join(o+" ")+o).split(" "),i(r,e,a))}var d,u,c,f="2.6.2",m={},p=e.documentElement,h="modernizr",v=e.createElement(h),_=v.style,g=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),$="Webkit Moz O ms",y=$.split(" "),x=$.toLowerCase().split(" "),S={},w=[],T=w.slice,F=function(t,a,o,n){var r,s,i,l,d=e.createElement("div"),u=e.body,c=u||e.createElement("body");if(parseInt(o,10))for(;o--;)i=e.createElement("div"),i.id=n?n[o]:h+(o+1),d.appendChild(i);return r=["&#173;",'<style id="s',h,'">',t,"</style>"].join(""),d.id=h,(u?d:c).innerHTML+=r,c.appendChild(d),u||(c.style.background="",c.style.overflow="hidden",l=p.style.overflow,p.style.overflow="hidden",p.appendChild(c)),s=a(d,t),u?d.parentNode.removeChild(d):(c.parentNode.removeChild(c),p.style.overflow=l),!!s},b={}.hasOwnProperty;c=n(b,"undefined")||n(b.call,"undefined")?function(t,e){return e in t&&n(t.constructor.prototype[e],"undefined")}:function(t,e){return b.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var a=T.call(arguments,1),o=function(){if(this instanceof o){var n=function(){};n.prototype=e.prototype;var r=new n,s=e.apply(r,a.concat(T.call(arguments)));return Object(s)===s?s:r}return e.apply(t,a.concat(T.call(arguments)))};return o}),S.touch=function(){var a;return"ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch?a=!0:F(["@media (",g.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(t){a=9===t.offsetTop}),a},S.csstransforms3d=function(){var t=!!l("perspective");return t&&"webkitPerspective"in p.style&&F("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(e){t=9===e.offsetLeft&&3===e.offsetHeight}),t},S.csstransitions=function(){return l("transition")};for(var I in S)c(S,I)&&(u=I.toLowerCase(),m[u]=S[I](),w.push((m[u]?"":"no-")+u));return m.addTest=function(t,e){if("object"==typeof t)for(var o in t)c(t,o)&&m.addTest(o,t[o]);else{if(t=t.toLowerCase(),m[t]!==a)return m;e="function"==typeof e?e():e,"undefined"!=typeof enableClasses&&enableClasses&&(p.className+=" "+(e?"":"no-")+t),m[t]=e}return m},o(""),v=d=null,m._version=f,m._prefixes=g,m._domPrefixes=x,m._cssomPrefixes=y,m.testProp=function(t){return s([t])},m.testAllProps=l,m.testStyles=F,m.prefixed=function(t,e,a){return e?l(t,e,a):l(t,"pfx")},m}(this,this.document),fullScreenApi={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},browserPrefixes="webkit moz o ms khtml".split(" ");if(document.cancelFullScreen!==undefined)fullScreenApi.supportsFullScreen=!0;else for(var i=0,il=browserPrefixes.length;il>i;i++)if(fullScreenApi.prefix=browserPrefixes[i],document[fullScreenApi.prefix+"CancelFullScreen"]!==undefined){fullScreenApi.supportsFullScreen=!0;break}fullScreenApi.supportsFullScreen&&(fullScreenApi.fullScreenEventName=fullScreenApi.prefix+"fullscreenchange",fullScreenApi.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},fullScreenApi.requestFullScreen=function(t){return""===this.prefix?t.requestFullScreen():t[this.prefix+"RequestFullScreen"]()},fullScreenApi.cancelFullScreen=function(){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()});var wrapClass="fotorama__wrap",wrapNotReadyClass=wrapClass+"--not-ready",wrapNavBeforeClass=wrapClass+"--nav-before",wrapVerticalClass=wrapClass+"--vertical",wrapHorizontalClass=wrapClass+"--horizontal",wrapCssTransitionsClass=wrapClass+"--css-transitions",wrapVideoClass=wrapClass+"--video",wrapFadeClass=wrapClass+"--fade",wrapTouchClass=wrapClass+"--touch",stageClass="fotorama__stage",stageFrameClass=stageClass+"__frame",stageOnlyActiveClass=stageClass+"--only-active",arrClass="fotorama__arr",arrDisabledClass="fotorama__arr--disabled",arrPrevClass="fotorama__arr--prev",arrNextClass="fotorama__arr--next",arrArrClass="fotorama__arr__arr",navDotsClass="fotorama__nav--dots",navThumbsClass="fotorama__nav--thumbs",navFrameClass="fotorama__nav__frame",navFrameThumbClass="fotorama__nav__frame--thumb",fadeFrontClass="fotorama__fade-front",fadeRearClass="fotorama__fade-rear",activeClass="fotorama__active",selectClass="fotorama__select",errorClass="fotorama__error",loadingClass="fotorama__loading",$WINDOW=$(window),$DOCUMENT=$(document),$HTML,$BODY,TOUCH=Modernizr.touch,QUIRKS_FORCE="quirks"===document.location.hash.replace("#",""),CSSTR=Modernizr.csstransforms3d&&Modernizr.csstransitions&&!QUIRKS_FORCE,FULLSCREEN=fullScreenApi.supportsFullScreen,TOUCH_TIMEOUT=300,TRANSITION_DURATION=333,SPINNER_COLOR="#777",AUTOPLAY_INTERVAL=5e3,MARGIN=2,THUMB_SIZE=64,WIDTH=500,HEIGHT=333,X="{{X}}",VIDEO_IFRAME='<div class="fotorama__video"><iframe src="'+X+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe></div>',VIDEO_IFRAME_SRC={vimeo:"http://player.vimeo.com/video/"+X+"?autoplay=1&amp;badge=0",youtube:"http://www.youtube.com/embed/"+X+"?autoplay=1",custom:X},BEZIER=bez([.1,0,.25,1]),lastEvent,moveEventType,preventEvent,preventEventTimeout,Spinner;(function(t,e,a){function o(t,a){var o,n=e.createElement(t||"div");for(o in a)n[o]=a[o];return n}function n(t){for(var e=1,a=arguments.length;a>e;e++)t.appendChild(arguments[e]);return t}function r(t,e,a,o){var n=["opacity",e,~~(100*t),a,o].join("-"),r=.01+100*(a/o),s=Math.max(1-(1-t)/e*(100-r),t),i=u.substring(0,u.indexOf("Animation")).toLowerCase(),l=i&&"-"+i+"-"||"";return f[n]||(m.insertRule("@"+l+"keyframes "+n+"{"+"0%{opacity:"+s+"}"+r+"%{opacity:"+t+"}"+(r+.01)+"%{opacity:1}"+(r+e)%100+"%{opacity:"+t+"}"+"100%{opacity:"+s+"}"+"}",m.cssRules.length),f[n]=1),n}function s(t,e){var o,n,r=t.style;if(r[e]!==a)return e;for(e=e.charAt(0).toUpperCase()+e.slice(1),n=0;c.length>n;n++)if(o=c[n]+e,r[o]!==a)return o}function i(t,e){for(var a in e)t.style[s(t,a)||a]=e[a];return t}function l(t){for(var e=1;arguments.length>e;e++){var o=arguments[e];for(var n in o)t[n]===a&&(t[n]=o[n])}return t}function d(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}var u,c=["webkit","Moz","ms","O"],f={},m=function(){var t=o("style",{type:"text/css"});return n(e.getElementsByTagName("head")[0],t),t.sheet||t.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"};Spinner=function(t){return this.spin?(this.opts=l(t||{},Spinner.defaults,p),a):new Spinner(t)},Spinner.defaults={},l(Spinner.prototype,{spin:function(t){this.stop();var e,a,n=this,r=n.opts,s=n.el=i(o(0,{className:r.className}),{position:"relative",width:0,zIndex:r.zIndex}),l=r.radius+r.length+r.width;if(t&&(t.insertBefore(s,t.firstChild||null),a=d(t),e=d(s),i(s,{left:("auto"==r.left?a.x-e.x+(t.offsetWidth>>1):parseInt(r.left,10)+l)+"px",top:("auto"==r.top?a.y-e.y+(t.offsetHeight>>1):parseInt(r.top,10)+l)+"px"})),s.setAttribute("aria-role","progressbar"),n.lines(s,n.opts),!u){var c=0,f=r.fps,m=f/r.speed,p=(1-r.opacity)/(m*r.trail/100),h=m/r.lines;(function v(){c++;for(var t=r.lines;t;t--){var e=Math.max(1-(c+t*h)%m*p,r.opacity);n.opacity(s,r.lines-t,e,r)}n.timeout=n.el&&setTimeout(v,~~(1e3/f))})()}return n},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=a),this},lines:function(t,e){function a(t,a){return i(o(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:t,boxShadow:a,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*l+e.rotate)+"deg) translate("+e.radius+"px"+",0)",borderRadius:(e.corners*e.width>>1)+"px"})}for(var s,l=0;e.lines>l;l++)s=i(o(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:u&&r(e.opacity,e.trail,l,e.lines)+" "+1/e.speed+"s linear infinite"}),e.shadow&&n(s,i(a("#000","0 0 4px #000"),{top:"2px"})),n(t,n(s,a(e.color,"0 0 1px rgba(0,0,0,.1)")));return t},opacity:function(t,e,a){t.childNodes.length>e&&(t.childNodes[e].style.opacity=a)}}),function(){function t(t,e){return o("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}var e=i(o("group"),{behavior:"url(#default#VML)"});!s(e,"transform")&&e.adj?(m.addRule(".spin-vml","behavior:url(#default#VML)"),Spinner.prototype.lines=function(e,a){function o(){return i(t("group",{coordsize:d+" "+d,coordorigin:-l+" "+-l}),{width:d,height:d})}function r(e,r,s){n(c,n(i(o(),{rotation:360/a.lines*e+"deg",left:~~r}),n(i(t("roundrect",{arcsize:a.corners}),{width:l,height:a.width,left:a.radius,top:-a.width>>1,filter:s}),t("fill",{color:a.color,opacity:a.opacity}),t("stroke",{opacity:0}))))}var s,l=a.length+a.width,d=2*l,u=2*-(a.width+a.length)+"px",c=i(o(),{position:"absolute",top:u,left:u});if(a.shadow)for(s=1;a.lines>=s;s++)r(s,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(s=1;a.lines>=s;s++)r(s);return n(e,c)},Spinner.prototype.opacity=function(t,e,a,o){var n=t.firstChild;o=o.shadow&&o.lines||0,n&&n.childNodes.length>e+o&&(n=n.childNodes[e+o],n=n&&n.firstChild,n=n&&n.firstChild,n&&(n.opacity=a))}):u=s(e,"animation")}()})(window,document),jQuery.Fotorama=function($fotorama,opts){function checkForVideo(){$.each(data,function(t,e){if(e.i===undefined){dataFrameCount++,e.i=dataFrameCount;var a=e.video,o={};"string"==typeof a&&(a=findVideoId(a,!0)),a&&(e.video=a,e.img||e.thumb?e.thumbsReady=!0:o=getVideoThumbs(e,data,dataFrameCount,that),updateData(data,{img:o.img,thumb:o.thumb},dataFrameCount,that))}})}function setData(){data=that.data=opts.data&&"object"==typeof opts.data?opts.data:data||getDataFromHtml($fotorama),size=that.size=data.length,checkForVideo(),activeIndex=limitIndex(activeIndex),navAppend.done=!1,size?setData.called||(setData.called=!0,$fotorama.html($_wrap)):that.destroy()}function stageNoMove(){stageShaftTouchTail.noMove=2>size||$videoPlaying||o_fade}function setAutoplayInterval(t){t===!0&&(t=""),opts.autoplay=Math.max(Number(t)||AUTOPLAY_INTERVAL,3*opts.transitionDuration)}function setOptions(){o_loop=opts.loop&&size>2,o_vertical="vertical"===opts.orientation,o_fade="crossfade"===opts.transition||"dissolve"===opts.transition;var t={add:[],remove:[]};size>1?(o_nav=opts.nav,o_navBefore="before"===opts.navPosition,o_arrows=opts.arrows,t.remove.push(selectClass)):o_nav=o_arrows=!1,opts.autoplay&&setAutoplayInterval(opts.autoplay),orientation=getOrientationKeys(opts.orientation),_pos=orientation._pos,_pos2=orientation._pos2,_coo=orientation._coo,_side=orientation._side,_side_=_side+"_",_side2=orientation._side2,_side2_=_side2+"_",o_thumbSide=numberFromMeasure(opts["thumb"+capitaliseFirstLetter(_side)])||THUMB_SIZE,o_thumbSide2=numberFromMeasure(opts["thumb"+capitaliseFirstLetter(_side2)])||THUMB_SIZE,stageShaftTouchTail._pos=navShaftTouchTail._pos=_pos,stageShaftTouchTail._coo=navShaftTouchTail._coo=_coo,stageShaftTouchTail.orientation=navShaftTouchTail.orientation=opts.orientation,stageShaftTouchTail.css3=navShaftTouchTail.css3=opts.css3,stageNoMove(),extendMeasures(opts),$style.html($.Fotorama.jst.style({thumbWidth:o_vertical?o_thumbSide2:o_thumbSide,thumbHeight:o_vertical?o_thumbSide:o_thumbSide2,thumbMargin:MARGIN,stamp:stamp})),o_nav===!0||"dots"===o_nav?($nav.addClass(navDotsClass).removeClass(navThumbsClass),frameDraw(size,"navDot")):"thumbs"===o_nav?($nav.addClass(navThumbsClass).removeClass(navDotsClass),frameDraw(size,"navThumb")):(o_nav=!1,$nav.removeClass(navThumbsClass+" "+navDotsClass)),o_allowFullScreen=opts.allowFullScreen,$fotorama.insertAfter($anchor).removeClass("fotorama--hidden"),o_nav&&o_navBefore?(t.add.push(wrapNavBeforeClass),$navWrap.insertBefore($stage)):(t.remove.push(wrapNavBeforeClass),$navWrap.insertAfter($stage)),o_allowFullScreen?($fullscreenIcon.appendTo($stage),o_nativeFullScreen=FULLSCREEN&&"native"===o_allowFullScreen):($fullscreenIcon.detach(),o_nativeFullScreen=!1),t[o_fade?"add":"remove"].push(wrapFadeClass),o_arrows?($arrs.show(),arrsUpdate()):$arrs.hide(),t[o_vertical?"add":"remove"].push(wrapVerticalClass),t[o_vertical?"remove":"add"].push(wrapHorizontalClass),lastOptions.css3!==opts.css3&&(CSSTR&&opts.css3?(t.add.push(wrapCssTransitionsClass),$stageShaft.add($navShaft).add("thumbs"===o_nav?$thumbBorder:null).each(function(){var t=$(this);t.css(getTranslate(Number($navShaft.css(_pos).replace("px","")),_pos,opts.css3)).css({top:0,left:0})})):(t.remove.push(wrapCssTransitionsClass),$stageShaft.add($navShaft).add("thumbs"===o_nav?$thumbBorder:null).each(function(){var t=$(this);t.css(CSSTR&&lastOptions.css3?getTranslate(Number(readTransform(t.css("transform"),_pos)),_pos,opts.css3):{}).css({transform:"none",transition:"0ms"})}))),TOUCH&&t.add.push(wrapTouchClass),krutilka.stop&&krutilka.stop(),krutilka=new Spinner({length:8,radius:6,width:2,color:SPINNER_COLOR,rotate:15}),$wrap.addClass(t.add.join(" ")).removeClass(t.remove.join(" ")),lastOptions=$.extend({},opts)}function normalizeIndex(t){return 0>t?(size+t%size)%size:t>=size?t%size:t}function limitIndex(t){return minMaxLimit(t,0,size-1)}function getPrevIndex(t){return t>0||o_loop?t-1:!1}function getNextIndex(t){return size-1>t||o_loop?t+1:!1}function setStageShaftMinMaxPosAndSnap(){stageShaftData.minPos=o_loop?-1/0:-getPosByIndex(size-1,measures[_side_],MARGIN,repositionIndex),stageShaftData.maxPos=o_loop?1/0:-getPosByIndex(0,measures[_side_],MARGIN,repositionIndex),stageShaftData.snap=measures[_side_]+MARGIN}function setNavShaftMinMaxPos(){navShaftData.minPos=Math.min(0,measures[_side_]-$navShaft[_side]()),navShaftData.maxPos=0,navShaftTouchTail.noMove=navShaftData.minPos===navShaftData.maxPos}function eachIndex(t,e,a){if("number"==typeof t){t=Array(t);var o=!0}return $.each(t,function(t,n){if(o&&(n=t),"number"==typeof n){var r=data[normalizeIndex(n)],s="$"+e+"Frame",i=r[s];a.call(this,t,n,r,i,s,i?i.data():undefined)}})}function setMeasures(t,e,a,o){(!measuresSetFLAG||"*"===measuresSetFLAG&&o===o_startIndex)&&(t=measureIsValid(opts.width)||measureIsValid(t)||WIDTH,e=measureIsValid(opts.height)||measureIsValid(e)||HEIGHT,that.resize({width:t,ratio:opts.ratio||a||t/e},0,o===o_startIndex?!0:"*"))}function loadImg(t,e,a,o,n){eachIndex(t,e,function(t,r,s,i,l,d){function u(){h.remove(),$.Fotorama.cache[g]="error",s.html&&"stage"===e||!y||y===g?(g&&!d.html?i.trigger("f:error").removeClass(loadingClass).addClass(errorClass):"stage"===e&&(i.trigger("f:load").removeClass(loadingClass+" "+errorClass).addClass("fotorama__loaded"),setMeasures()),d.state="error",!(size>1)||s.html||s.deleted||s.video||m||(s.deleted=!0,that.splice(r,1))):(s[_]=g=y,loadImg([r],e,a,o,!0))}function c(){var t=h.width(),n=h.height(),l=t/n;v.measures={width:t,height:n,ratio:l},setMeasures(t,n,l,r),h.off("load error").addClass("fotorama__img"+(m?" fotorama__img--full":"")).prependTo(i),fit(h,a||measures,o||s.fit||opts.fit),$.Fotorama.cache[g]="loaded",d.state="loaded",setTimeout(function(){i.trigger("f:load").removeClass(loadingClass+" "+errorClass).addClass("fotorama__loaded "+(m?"fotorama__loaded--full":"fotorama__loaded--img")),"stage"===e&&$fotorama.trigger("fotorama:load",eventData(normalizeIndex(r)))},4)}function f(){waitFor(function(){return!isHidden(p)},function(){c()})}if(i){var m=that.fullScreen&&s.full&&!d.$full&&"stage"===e;if(!d.$img||n||m){var p=new Image,h=$(p),v=h.data();d[m?"$full":"$img"]=h;var _="stage"===e?m?"full":"img":"thumb",g=s[_],y=m?null:s["stage"===e?"thumb":"img"];if("navThumb"===e&&(i=d.$wrap),!g)return u(),undefined;$.Fotorama.cache[g]?function x(){"error"===$.Fotorama.cache[g]?u():"loaded"===$.Fotorama.cache[g]?f():setTimeout(x,100)}():($.Fotorama.cache[g]="*",h.on("load",f).on("error",u)),p.src=g,h.appendTo($.Fotorama.$load)}}})}function updateFotoramaState(){var t=that.activeFrame[stageFrameKey];t&&!t.data().state&&(krutilka.stop().spin(t.get(0)),t.on("f:load f:error",function(){t.off("f:load f:error"),krutilka.stop()}))}function frameDraw(t,e){eachIndex(t,e,function(t,a,o,n,r,s){if(!n)if(n=o[r]=$wrap[r].clone(),s=n.data(),s.data=o,"stage"===e){if(o.html&&$('<div class="fotorama__html"></div>').append(o.html).appendTo(n),opts.captions&&o.caption){var i=$('<div class="fotorama__caption"></div>').appendTo(n);$('<div class="fotorama__caption__inner"></div>').append(o.caption).appendTo(i)}if(o.video){var l=$videoPlay.clone();smartClick(l,function(){that.playVideo()},{onStart:function(t){onTouch.call(this,t),stageShaftTouchTail.control=!0},tail:stageShaftTouchTail}),n.addClass(stageFrameClass+"--video").append(l)}$stageFrame=$stageFrame.add(n)}else"navDot"===e?$navDotFrame=$navDotFrame.add(n):"navThumb"===e&&(s.$wrap=n.children(":first"),$navThumbFrame=$navThumbFrame.add(n),o.video&&n.append($videoPlay.clone()))})}function callFit(t,e,a){return t&&t.size()?fit(t,e,a):undefined}function stageFramePosition(t){eachIndex(t,"stage",function(t,e,a,o,n,r){if(o){o.css(_pos,o_fade?0:getPosByIndex(e,measures[_side_],MARGIN,repositionIndex)).css(_pos2,0).css(o_fade?{}:getDuration(0)).fadeTo(0,o_fade&&e!==activeIndex?0:1),r.appended||(r.appended=!0,o.appendTo($stageShaft),unloadVideo(a.$video));var s=a.fit||opts.fit;callFit(r.$img,measures,s),callFit(r.$full,measures,s)}})}function thumbsDraw(t,e){if("thumbs"===o_nav&&!isNaN(t)){var a=o_thumbSide+MARGIN,o=limitIndex(getIndexByPos(t+a,a)),n=limitIndex(getIndexByPos(t-measures[_side_],a)),r={};r[_side_]=o_thumbSide,r[_side2_]=o_thumbSide2,$navThumbFrame.each(function(){var t=$(this),a=t.data(),s=a.eq,i="cover";o>s||s>n||callFit(a.$img,r,"cover")||e&&loadImg([s],"navThumb",r,i)})}}function navAppend(t,e,a){navAppend.done||(t=t.filter(function(){for(var t,e=$(this),a=e.data(),o=0,n=data.length;n>o;o++){var r=data[o];if(a.data===r){t=!0,a.eq=o;break}}return t||e.remove(),t}).sort(function(t,e){return $(t).data().eq-$(e).data().eq}).appendTo(e),a&&setNavShaftMinMaxPos())}function arrsUpdate(){o_arrows&&$arrs.each(function(t){$(this).toggleClass(arrDisabledClass,!o_loop&&(0===activeIndex&&0===t||activeIndex===size-1&&1===t)&&!$videoPlaying)})}function getNavFrameCenter(t){return t.position()[_pos]+o_thumbSide/2}function slideThumbBorder(t){slide($thumbBorder,{time:.9*t,pos:getNavFrameCenter(that.activeFrame[navFrameKey]),_pos:_pos},opts.css3)}function slideNavShaft(t){if(data[t.guessIndex][navFrameKey]){var e=minMaxLimit(t.coo-getNavFrameCenter(data[t.guessIndex][navFrameKey]),navShaftData.minPos,navShaftData.maxPos),a=.9*t.time;slide($navShaft,{time:a,pos:e,_pos:_pos,onEnd:function(){thumbsDraw(e,!0)}},opts.css3),a&&thumbsDraw(e),setShadow($nav,findShadowEdge(e,navShaftData.minPos,navShaftData.maxPos))}}function navUpdate(){if("thumbs"===o_nav)$navFrame=$navThumbFrame,navFrameKey=navThumbFrameKey;else{if(!o_nav)return;$navFrame=$navDotFrame,navFrameKey=navDotFrameKey}navAppend($navFrame,$navShaft,!0),navAppend.done=!0,$navFrame.removeClass(activeClass),that.activeFrame[navFrameKey].addClass(activeClass)}function stageShaftReposition(){repositionIndex=dirtyIndex=activeIndex;var t=that.activeFrame,e=t[stageFrameKey];e&&($stageFrame.not(that.activeFrame[stageFrameKey].addClass(activeClass)).detach().data("appended",!1).removeClass(activeClass+" "+fadeFrontClass+" "+fadeRearClass),stop($stageShaft,_pos,opts.css3),$stageShaft.css(getTranslate(0,_pos,opts.css3)),stageFramePosition([activeIndex,prevIndex,nextIndex]),setStageShaftMinMaxPosAndSnap(),setNavShaftMinMaxPos())}function extendMeasures(options){options&&$.extend(measures,{width:options.width,height:options.height,minWidth:options.minWidth,maxWidth:options.maxWidth,minHeight:options.minHeight,maxHeight:options.maxHeight,ratio:eval(options.ratio?(options.ratio+"").replace(":","/"):undefined)})}function eventData(t){return data?{index:t,frame:data[t]}:!1}function resetFotoramaMargins(){$_wrap.css({marginLeft:0,marginRight:0})}function onTouch(){opts.stopAutoplayOnTouch?that.stopAutoplay():pausedAutoplayFLAG=!0}function releaseAutoplay(){pausedAutoplayFLAG=!(!$videoPlaying&&!stoppedAutoplayFLAG)}function changeAutoplay(){if(clearTimeout(changeAutoplay.timeout),!opts.autoplay||pausedAutoplayFLAG)return that.autoplay&&(that.autoplay=!1,$fotorama.trigger("fotorama:stopautoplay")),undefined;that.autoplay||(that.autoplay=!0,$fotorama.trigger("fotorama:startautoplay"));
var t=activeIndex;changeAutoplay.timeout=setTimeout(function(){var e=that.activeFrame[stageFrameKey].data();waitFor(function(){return e.state||t!==activeIndex},function(){pausedAutoplayFLAG||t!==activeIndex||that.show(normalizeIndex(activeIndex+1))})},opts.autoplay)}function cancelFullScreen(){that.fullScreen&&(that.fullScreen=!1,FULLSCREEN&&fullScreenApi.cancelFullScreen(fotorama),$BODY.removeClass("fullscreen"),$fotorama.removeClass("fotorama--fullscreen"),$fotorama.insertAfter($anchor).trigger("fotorama:fullscreenexit"),measures=$.extend({},measuresStash),unloadVideo($videoPlaying,!0),that.resize(),loadImg([activeIndex,prevIndex,nextIndex],"stage"),$WINDOW.scrollLeft(scrollLeft).scrollTop(scrollTop))}function setShadow(t,e){t.removeClass("fotorama__shadows--left fotorama__shadows--right"),e&&!$videoPlaying&&t.addClass(e.replace(/^|\s/g," fotorama__shadows--"))}function unloadVideo(t,e,a){e&&($wrap.removeClass(wrapVideoClass),$videoPlaying=!1,stageNoMove()),t&&(t.remove(),$fotorama.trigger("fotorama:unloadvideo")),a&&(releaseAutoplay(),changeAutoplay())}function onStageTap(t){$videoPlaying?unloadVideo($videoPlaying,!0,!0):that.show({index:t.shiftKey||t[_coo]-$stage.offset()[_pos]<measures[_side_]/3?"<":">",slow:t.altKey})}function onNavFrameClick(t,e){var a=$(this).data().eq;that.show({index:a,slow:t.altKey,coo:t[_coo]-$nav.offset()[_pos],time:e})}function reset(){if(setData(),setOptions(),!ready.done){if(opts.hash&&location.hash&&(opts.startIndex=getIndexFromHash(location.hash.replace(/^#/,""),data,0===index)||0),"random"===opts.startIndex&&(opts.startIndex=getRandomInt(0,size-1)),o_startIndex=o_loop?normalizeIndex(opts.startIndex):limitIndex(opts.startIndex),isNaN(o_startIndex)){var t=getIndexFromHash(opts.startIndex,data,!0);o_startIndex=isNaN(t)?0:t}activeIndex=repositionIndex=dirtyIndex=lastActiveIndex=o_startIndex}size?($videoPlaying&&unloadVideo($videoPlaying,!0),that.show({index:activeIndex,time:0}),that.resize()):that.destroy()}function ready(){ready.done||(ready.done=!0,$wrap.removeClass(wrapNotReadyClass),$fotorama.trigger("fotorama:ready"))}$HTML=$HTML||$("html"),$BODY=$BODY||$("body"),$.Fotorama.$load=$.Fotorama.$load||$('<div class="fotorama__load"></div>').appendTo($BODY);var that=this,index=_size,stamp=(new Date).getTime(),fotorama=$fotorama.addClass("fotorama"+stamp).get(0),data,dataFrameCount=0,fotoramaData=$fotorama.data(),size,$style=$("<style></style>").insertBefore($fotorama),$anchor=$('<div style="display: none;"></div>').insertBefore($fotorama),$_wrap=$("<div></div>"),$wrap=$('<div class="'+wrapClass+" "+wrapNotReadyClass+'"></div>').appendTo($_wrap),$stage=$('<div class="'+stageClass+'"></div>').appendTo($wrap),stage=$stage.get(0),$stageShaft=$('<div class="fotorama__stage__shaft"></div>').appendTo($stage),$stageFrame=$(),$arrPrev=$('<div class="'+arrClass+" "+arrPrevClass+'"><div class="'+arrArrClass+'"></div></div>'),$arrNext=$('<div class="'+arrClass+" "+arrNextClass+'"><div class="'+arrArrClass+'"></div></div>'),$arrs=$arrPrev.add($arrNext).appendTo($stage),$navWrap=$('<div class="fotorama__nav-wrap"></div>'),$nav=$('<div class="fotorama__nav"></div>').appendTo($navWrap),$navShaft=$('<div class="fotorama__nav__shaft"></div>').appendTo($nav),$navFrame,$navDotFrame=$(),$navThumbFrame=$(),stageFrameKey="$stageFrame",navFrameKey,navDotFrameKey="$navDotFrame",navThumbFrameKey="$navThumbFrame",stageShaftData=$stageShaft.data(),navShaftData=$navShaft.data(),$shadows=bindNoInteraction($('<div class="fotorama__shadow fotorama__shadow--left"></div><div class="fotorama__shadow fotorama__shadow--right"></div>').appendTo($stage)),$navShadows=bindNoInteraction($shadows.clone().appendTo($nav)),$thumbBorder=$('<div class="fotorama__thumb-border"></div>').appendTo($navShaft),$fullscreenIcon=$('<div class="fotorama__fullscreen"></div>'),$videoPlay=$('<div class="fotorama__video-play"></div>'),$videoClose=$('<div class="fotorama__video-close"></div>').appendTo($stage),$videoPlaying,activeIndex=!1,activeFrame,repositionIndex,dirtyIndex,lastActiveIndex,prevIndex,nextIndex,o_loop,o_vertical,o_nav,o_navBefore,o_arrows,o_startIndex=!1,o_allowFullScreen,o_nativeFullScreen,o_fade,o_thumbSide,o_thumbSide2,lastOptions={},orientation,_pos,_pos2,_coo,_side,_side_,_side2,_side2_,measures={},measuresSetFLAG,krutilka={},stageShaftTouchTail={},navShaftTouchTail={},scrollTop,scrollLeft,showedFLAG,pausedAutoplayFLAG,stoppedAutoplayFLAG,measuresStash;$wrap[stageFrameKey]=$('<div class="'+stageFrameClass+'"></div>'),$wrap[navThumbFrameKey]=$('<div class="'+navFrameClass+" "+navFrameThumbClass+'"><div class="fotorama__thumb"></div></div>'),$wrap[navDotFrameKey]=$('<div class="'+navFrameClass+' fotorama__nav__frame--dot"><div class="fotorama__dot"></div></div>'),$.Fotorama.size++,_size++,$.Fotorama.api[index]=this,this.startAutoplay=function(t){return that.autoplay?this:(pausedAutoplayFLAG=stoppedAutoplayFLAG=!1,setAutoplayInterval(t||opts.autoplay),changeAutoplay(),this)},this.stopAutoplay=function(){return that.autoplay?(pausedAutoplayFLAG=stoppedAutoplayFLAG=!0,changeAutoplay(),this):this},this.show=function(t){function e(){frameDraw([activeIndex,prevIndex,nextIndex],"stage"),updateFotoramaState(),loadImg([activeIndex,prevIndex,nextIndex],"stage"),stageShaftReposition(),$fotorama.trigger("fotorama:showend"),opts.hash&&showedFLAG&&setHash(activeFrame.id||activeIndex+1,that.eq),releaseAutoplay(),changeAutoplay(),showedFLAG=!0}if(!data)return this;var a,o,n=opts.transitionDuration;if("object"!=typeof t?a=t:(a=t.index,n="number"==typeof t.time?t.time:n,o=t.overPos),t.slow&&(n*=10),">"===a?a=dirtyIndex+1:"<"===a?a=dirtyIndex-1:"<<"===a?a=0:">>"===a&&(a=size-1),isNaN(a)){var r=getIndexFromHash(a,data,!0);if(isNaN(r))return this;a=r}if(that.activeIndex=activeIndex=o_loop?normalizeIndex(a):limitIndex(a),prevIndex=getPrevIndex(activeIndex),nextIndex=getNextIndex(activeIndex),dirtyIndex=o_loop?a:activeIndex,that.activeFrame=activeFrame=data[activeIndex],stageFramePosition([dirtyIndex]),unloadVideo(!1,activeFrame.i!==data[normalizeIndex(repositionIndex)].i),$fotorama.trigger("fotorama:show"),o_fade){var s=activeFrame[stageFrameKey],i=activeIndex!==lastActiveIndex?data[lastActiveIndex][stageFrameKey]:null;fade(s,i,{time:n,method:opts.transition,onEnd:e},opts.css3)}else slide($stageShaft,{pos:-getPosByIndex(dirtyIndex,measures[_side_],MARGIN,repositionIndex),_pos:_pos,overPos:o,time:n,onEnd:e},opts.css3);arrsUpdate(),navUpdate();var l=limitIndex(activeIndex+minMaxLimit(dirtyIndex-lastActiveIndex,-1,1)),d=t.coo===undefined;return o_nav&&(d||l!==activeIndex)&&slideNavShaft({time:n,coo:d?measures[_side_]/2:t.coo,guessIndex:d?activeIndex:l}),"thumbs"===o_nav&&slideThumbBorder(n),lastActiveIndex=activeIndex,this},this.requestFullScreen=function(){return!o_allowFullScreen||that.fullScreen?this:(that.fullScreen=!0,scrollTop=$WINDOW.scrollTop(),scrollLeft=$WINDOW.scrollLeft(),$WINDOW.scrollLeft(1).scrollTop(1),o_nativeFullScreen&&fullScreenApi.requestFullScreen(fotorama),setTimeout(function(){$WINDOW.scrollLeft(0).scrollTop(0),$BODY.addClass("fullscreen"),$fotorama.addClass("fotorama--fullscreen"),$fotorama.css({top:0}).appendTo($BODY).trigger("fotorama:fullscreenenter"),measuresStash=$.extend({},measures),unloadVideo($videoPlaying,!0),that.resize(),loadImg([activeIndex,prevIndex,nextIndex],"stage")},5),this)},this.cancelFullScreen=function(){return o_nativeFullScreen&&fullScreenApi.isFullScreen()?fullScreenApi.cancelFullScreen(document):cancelFullScreen(),this},document.addEventListener&&document.addEventListener(fullScreenApi.fullScreenEventName,function(){fullScreenApi.isFullScreen()||$videoPlaying||cancelFullScreen()}),$DOCUMENT.on("keydown",function(t){if($videoPlaying&&27===t.keyCode)t.preventDefault(),unloadVideo($videoPlaying,!0,!0);else if(that.fullScreen||opts.keyboard&&!index&&that.fullScreen)if(27===t.keyCode)t.preventDefault(),that.cancelFullScreen();else if(39===t.keyCode||40===t.keyCode){if(40===t.keyCode&&!that.fullScreen)return;t.preventDefault(),that.show({index:">",slow:t.altKey})}else if(37===t.keyCode||38===t.keyCode){if(38===t.keyCode&&!that.fullScreen)return;t.preventDefault(),that.show({index:"<",slow:t.altKey})}}),index||$DOCUMENT.on("keydown","textarea, input, select",function(t){that.fullScreen||t.stopPropagation()}),this.resize=function(t){if(!data)return this;var e=arguments[1]||0,a=arguments[2];extendMeasures(that.fullScreen?{width:"100%",maxWidth:null,minWidth:null,height:"100%",maxHeight:null,minHeight:null}:t);var o=measures.width,n=measures.height,r=measures.ratio,s=$WINDOW.height()-(o_nav&&!o_vertical?$nav.height():0),i=$nav.width();if(!measureIsValid(o))return this;if(resetFotoramaMargins(),o_vertical&&o_nav&&$_wrap.css("margin-"+(o_navBefore?"left":"right"),i),$wrap.css({width:o,minWidth:measures.minWidth,maxWidth:measures.maxWidth}),o=measures.width_=$wrap.width(),n=numberFromPercent(n)/100*s||numberFromMeasure(n),!n){if(!r)return this;n=o/r}return n=measures.height_=minMaxLimit(n,numberFromPercent(measures.minHeight)/100*s||numberFromMeasure(measures.minHeight),numberFromPercent(measures.maxHeight)/100*s||numberFromMeasure(measures.maxHeight)),stageShaftReposition(),$stage.addClass(stageOnlyActiveClass).stop().animate({width:o,height:n},e,function(){$stage.removeClass(stageOnlyActiveClass)}),o_nav&&($nav.stop().animate(o_vertical?{left:o_navBefore?-i:o,height:n}:{width:o},e).css(o_vertical?{width:"auto"}:{left:0,height:"auto"}),slideNavShaft({guessIndex:activeIndex,time:e,coo:measures[_side_]/2}),"thumbs"===o_nav&&navAppend.done&&slideThumbBorder(e)),measuresSetFLAG=a||!0,ready(),this},this.setOptions=function(t){return data?($.extend(opts,t),reset(),this):this},this.destroy=function(){return data?(resetFotoramaMargins(),$fotorama.html(fotoramaData.urtext),that.data=data=undefined,$.Fotorama.size--,this):this},this.initialize=function(t){return data?this:(fotoramaData.api=undefined,$fotorama.fotorama(t),this)},this.playVideo=function(){var t=that.activeFrame,e=t.video,a=activeIndex;return"object"==typeof e&&t.videoReady?(o_nativeFullScreen&&that.fullScreen&&that.cancelFullScreen(),waitFor(function(){return!fullScreenApi.isFullScreen()||a!==activeIndex},function(){a===activeIndex&&(t.$video||(t.$video=$(VIDEO_IFRAME.replace(X,VIDEO_IFRAME_SRC[e.type].replace(X,e.id)))),t.$video.appendTo(t[stageFrameKey]),$wrap.addClass(wrapVideoClass),$videoPlaying=t.$video,stageShaftTouchTail.noMove=!0,$fotorama.trigger("fotorama:loadvideo"))}),this):this},this.stopVideo=function(){return unloadVideo($videoPlaying,!0,!0),this},stageShaftTouchTail=moveOnTouch($stageShaft,{onStart:onTouch,onMove:function(t,e){setShadow($stage,e.edge)},onEnd:function(t){if(setShadow($stage),!t.moved)return onStageTap(t.startEvent),undefined;var e=getIndexByPos(t.newPos,measures[_side_],MARGIN,repositionIndex);that.show({index:e,time:t.time,overPos:t.overPos})},timeLow:1,timeHigh:1,friction:2,select:"."+selectClass+", ."+selectClass+" *",$wrap:$stage,orientation:opts.orientation,css3:opts.css3}),navShaftTouchTail=moveOnTouch($navShaft,{onStart:onTouch,onMove:function(t,e){setShadow($nav,e.edge)},onEnd:function(t){function e(){releaseAutoplay(),changeAutoplay(),thumbsDraw(t.newPos,!0)}if(t.moved)t.pos!==t.newPos?(slide($navShaft,{time:t.time,pos:t.newPos,_pos:_pos,overPos:t.overPos,onEnd:e},opts.css3),thumbsDraw(t.newPos),setShadow($nav,findShadowEdge(t.newPos,navShaftData.minPos,navShaftData.maxPos))):e();else{var a=t.$target.closest("."+navFrameClass,$navShaft).get(0);if(!a)return;onNavFrameClick.call(a,t.startEvent)}},timeLow:.5,timeHigh:2,friction:5,$wrap:$nav,orientation:opts.orientation,css3:opts.css3}),smartClick($arrs,function(t){t.preventDefault(),$videoPlaying?unloadVideo($videoPlaying,!0,!0):that.show({index:$arrs.index(this)?">":"<",slow:t.altKey})},{onStart:function(t){onTouch.call(this,t),stageShaftTouchTail.control=!0},tail:stageShaftTouchTail}),smartClick($fullscreenIcon,function(){that.fullScreen?that.cancelFullScreen():that.requestFullScreen(),releaseAutoplay(),changeAutoplay()},{onStart:function(t){onTouch.call(this,t),stageShaftTouchTail.control=!0},tail:stageShaftTouchTail}),$.each("load push pop shift unshift reverse sort splice".split(" "),function(t,e){that[e]=function(){return"load"!==e?Array.prototype[e].apply(data,arguments):arguments[0]&&"object"==typeof arguments[0]&&(opts.data=arguments[0]),reset(),that}}),$WINDOW.on("resize",this.resize),reset()};var methods={};$.each("show resize load push pop shift unshift reverse sort splice setOptions requestFullScreen cancelFullScreen startAutoplay stopAutoplay playVideo stopVideo destroy".split(" "),function(t,e){methods[e]=function(){var t=arguments;return this.each(function(a){if(!a||"load"!==e&&"push"!==e&&"unshift"!==e&&"splice"!==e){a&&"setOptions"===e&&"object"==typeof t[0]&&(t[0].data=null);var o=$(this),n=o.data(),r=n.api;r&&r[e].apply(r,t)}})}}),$.fn.fotorama=function(t){if(methods[t])return methods[t].apply(this,Array.prototype.slice.call(arguments,1));var e="initialize"===t?arguments[1]:t;return this.each(function(){var t=this,a=$(this),o=a.data();o.api||waitFor(function(){return!isHidden(t)},function(){o.urtext=a.html(),o.api=new $.Fotorama(a,$.extend({},{loop:!1,data:null,startIndex:0,orientation:"horizontal",transition:"slide",css3:!0,arrows:!0,keyboard:!1,fit:"contain",nav:"dots",navPosition:"after",hash:!1,allowFullScreen:!1,transitionDuration:TRANSITION_DURATION,captions:!0,autoplay:!1,stopAutoplayOnTouch:!0,width:null,minWidth:null,maxWidth:null,height:null,minHeight:null,maxHeight:null,ratio:null,thumbWidth:THUMB_SIZE,thumbHeight:THUMB_SIZE},$.extend({},e,o))),"object"==typeof e&&(e.data=null)})})},$.Fotorama.cache={};var _size=0;$.Fotorama.size=0,$.Fotorama.api=[],$(function(){$(".fotorama").fotorama()}),this.$=this.$||{},this.$.Fotorama=this.$.Fotorama||{},this.$.Fotorama.jst=this.$.Fotorama.jst||{},this.$.Fotorama.jst.style=function(obj){obj||(obj={});var __t,__p="";with(_.escape,obj)__p+=".fotorama"+(null==(__t=stamp)?"":__t)+" .fotorama__nav--thumbs .fotorama__nav__frame {\n  padding: "+(null==(__t=thumbMargin)?"":__t)+"px "+(null==(__t=thumbMargin/2)?"":__t)+"px;\n  width: "+(null==(__t=thumbWidth)?"":__t)+"px;\n  height: "+(null==(__t=thumbHeight)?"":__t)+"px;\n}\n.fotorama"+(null==(__t=stamp)?"":__t)+" .fotorama__thumb {\n  width: "+(null==(__t=thumbWidth)?"":__t)+"px;\n  height: "+(null==(__t=thumbHeight)?"":__t)+"px;\n}\n.fotorama"+(null==(__t=stamp)?"":__t)+" .fotorama__thumb-border {\n  width: "+(null==(__t=thumbWidth-2*thumbMargin)?"":__t)+"px;\n  height: "+(null==(__t=thumbHeight-2*thumbMargin)?"":__t)+"px;\n  border-width: "+(null==(__t=thumbMargin)?"":__t)+"px;\n  margin-top: "+(null==(__t=thumbMargin)?"":__t)+"px;\n  margin-left: "+(null==(__t=-thumbWidth/2+thumbMargin/2)?"":__t)+"px;\n}\n.fotorama"+(null==(__t=stamp)?"":__t)+" .fotorama__wrap--vertical .fotorama__nav--thumbs {\n  width: "+(null==(__t=thumbWidth+2*thumbMargin)?"":__t)+"px;\n}\n.fotorama"+(null==(__t=stamp)?"":__t)+" .fotorama__wrap--vertical .fotorama__nav__frame {\n  padding: "+(null==(__t=thumbMargin/2)?"":__t)+"px "+(null==(__t=thumbMargin)?"":__t)+"px;\n}\n.fotorama"+(null==(__t=stamp)?"":__t)+" .fotorama__wrap--vertical .fotorama__thumb-border {\n  margin-left: "+(null==(__t=thumbMargin)?"":__t)+"px;\n  margin-top: "+(null==(__t=-thumbHeight/2+thumbMargin/2)?"":__t)+"px;\n}";return __p}})(window,document,jQuery);