<!DOCTYPE html>
<html>
<head>
  <title></title>
  <script src=jquery-1.8.2.js></script>
  <script>
    $(function () {

      var $test = $('#test'),
          $top = $('#top'),
          good,
          bad;

      console.time('filter & size');


      $.each(new Array(10000), function () {
        good = !!($test.filter('.good').size() || $test.parents('.good').size());
        bad = !!($test.filter('.bad').size() || $test.parents('.bad').size());
      });
      console.log(good, bad);
      console.timeEnd('filter & size');



      console.time('is');


      $.each(new Array(10000), function () {
        good = $test.is('.good') || !!$test.parents('.good').size();
        bad = $test.is('.bad') || !!$test.parents('.bad').size();
      });

      console.log(good, bad);
      console.timeEnd('is');

      console.time('closest');
      $.each(new Array(10000), function () {
        good = !!$test.closest('.good').size();
        bad = !!$test.closest('.bad').size();
      });
      console.log(good, bad);
      console.timeEnd('closest');

      console.time('is from top');
      $.each(new Array(10000), function () {
        good = !!$test.is('.good *', $top);
        bad = !!$test.is('.bad *', $top);
      });
      console.log(good, bad);
      console.timeEnd('is from top');


      var $test2 = $('#test2'),
          $top2 = $('#top2'),
          top2 = $top2.get(0);
//      console.time('is big tree');
//
//
//      $.each(new Array(10000), function () {
//        good = $test2.is('.good') || !!$test2.parents('.good').size();
//        bad = $test2.is('.bad') || !!$test2.parents('.bad').size();
//      });
//
//      console.log(good, bad);
//      console.timeEnd('is big tree');
//
//
//      console.time('closest big tree');
//      $.each(new Array(10000), function () {
//        good = !!$test2.closest('.good').size();
//        bad = !!$test2.closest('.bad').size();
//      });
//      console.log(good, bad);
//      console.timeEnd('closest big tree');

      console.time('is from top big tree');
      $.each(new Array(10000), function () {
        good = !!$test2.is('.good, .good *', top2);
        bad = !!$test2.is('.bad, .bad *', top2);
      });
      console.log(good, bad);
      console.timeEnd('is from top big tree');


    });
  </script>
</head>
<body>

<div>
  <div>
    <div>
      <div>
        <div>
          <div>
            <div>
              <div>
                <div>
                  <div>
                    <div>
                      <div>
                        <div>
                          <div>
                            <div>
                              <div>
                                <div>
                                  <div>
                                    <div>
                                      <div>
                                        <div class="top" id="top">
                                          <div class="good">
                                            <div>
                                              <div id="test"></div>
                                            </div>
                                          </div>
                                        </div>

                                        <div class="top" id="top2">
                                          <div class="good2">
                                            <div>
                                              <div>
                                                <div>
                                                  <div>
                                                    <div>
                                                      <div>
                                                        <div>
                                                          <div>
                                                            <div>
                                                              <div>
                                                                <div>
                                                                  <div>
                                                                    <div>
                                                                      <div>
                                                                        <div>
                                                                          <div>
                                                                            <div>
                                                                              <div>
                                                                                <div>
                                                                                  <div>
                                                                                    <div>
                                                                                      <div>
                                                                                        <div>
                                                                                          <div>
                                                                                            <div>
                                                                                              <div>
                                                                                                <div>
                                                                                                  <div>
                                                                                                    <div>
                                                                                                      <div>
                                                                                                        <div>
                                                                                                          <div>
                                                                                                            <div>
                                                                                                              <div>
                                                                                                                <div>
                                                                                                                  <div>
                                                                                                                    <div>
                                                                                                                      <div>
                                                                                                                        <div>
                                                                                                                          <div>
                                                                                                                            <div>
                                                                                                                              <div>
                                                                                                                                <div>
                                                                                                                                  <div>
                                                                                                                                    <div
                                                                                                                                        id="test2" class="bad"></div>
                                                                                                                                  </div>
                                                                                                                                </div>
                                                                                                                              </div>
                                                                                                                            </div>
                                                                                                                          </div>
                                                                                                                        </div>
                                                                                                                      </div>
                                                                                                                    </div>
                                                                                                                  </div>
                                                                                                                </div>
                                                                                                              </div>
                                                                                                            </div>
                                                                                                          </div>
                                                                                                        </div>
                                                                                                      </div>
                                                                                                    </div>
                                                                                                  </div>
                                                                                                </div>
                                                                                              </div>
                                                                                            </div>
                                                                                          </div>
                                                                                        </div>
                                                                                      </div>
                                                                                    </div>
                                                                                  </div>
                                                                                </div>
                                                                              </div>
                                                                            </div>
                                                                          </div>
                                                                        </div>
                                                                      </div>
                                                                    </div>
                                                                  </div>
                                                                </div>
                                                              </div>
                                                            </div>
                                                          </div>
                                                        </div>
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

</body>
</html>