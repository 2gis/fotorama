<!DOCTYPE html>
<html>
<head>
  <title></title>
  <script src=jquery-1.8.2.js></script>
  <script src=../modernizr.js></script>
  <script src=../basevars.js></script>
  <script src=../utils.js></script>
  <script src=../animate.js></script>
  <script src=../touch.js></script>
  <script src=../moveontouch.js></script>
  <script>
    //var CSS3 = false;

    $(function () {

      var onEnd = function (result, options) {
        var pos = result.pos,
            minPos = result.minPos,
            maxPos = result.maxPos,
            virtualPos,
            limitPos,
            newPos,
            overPos,
            forwardFLAG = result.forward,
            time = TRANSITION_DURATION,
            speed,
            snap = options.snap,
            friction = options.friction,
            swipeFLAG = result.swipe;

        if (!snap) {
          newPos = minMaxLimit(pos, minPos, maxPos);
        } else {
          newPos = minMaxLimit(Math[swipeFLAG ? (forwardFLAG ? 'floor' : 'ceil') : 'round'](pos / snap) * snap, minPos, maxPos);
          minPos = maxPos = newPos;
        }

        if (swipeFLAG && (snap || newPos === pos)) {
          speed = -(result.cooDiff / result.timeDiff);
          time *= minMaxLimit(Math.abs(speed), options.timeLow, options.timeHigh);
          virtualPos = Math.round(pos + speed * time / friction);

          if (!snap) {
            newPos = virtualPos;
          }

          if (!forwardFLAG && virtualPos > maxPos || forwardFLAG && virtualPos < minPos) {
            limitPos = forwardFLAG ? minPos : maxPos;
            overPos = virtualPos - limitPos;
            if (!snap) {
              newPos = limitPos;
            }
            overPos = minMaxLimit(newPos + overPos * .03, limitPos - 50, limitPos + 50);
            time = Math.abs((pos - overPos) / (speed / friction));
          }
        }

        time *= result.slow ? 10 : 1;

        if (newPos != pos) {
          animate($(this), {
            pos: newPos,
            _pos: 'left',
            overPos: overPos,
            time: time
          });
        }
      }

      moveOnTouch($('#shaft1'), {
        onStart: function (e) {
        },
        onMove: function (e) {
        },
        onEnd: function(result) {
          console.log(result);
          animate($(this), {
            pos: result.pos,
            _pos: 'left',
            overPos: result.overPos,
            time: result.time
          });
        },
        timeLow:.5,
        timeHigh:2,
        friction:5,
        $wrap: $('#wrap1'),
        orientation: 'horizontal'
      });

      moveOnTouch($('#shaft3'), {
        onStart: function (e) {
        },
        onMove: function (e) {
        },
        onEnd: function(result) {
          console.log(result);
          animate($(this), {
            pos: result.pos,
            _pos: 'left',
            overPos: result.overPos,
            time: result.time
          });
        },
        timeLow:1,
        timeHigh:1,
        friction:2,
        snap:900,
        $wrap: $('#wrap3'),
        orientation: 'horizontal'
      });
    });
  </script>
</head>
<body style="margin: 20px;">

<div
    style="-webkit-backface-visibility: hidden; background: #ddd; width: 900px; height: 200px; margin: auto; font-size: 64px; overflow: hidden; position: relative;"
    id="wrap1">
  <div id="shaft1" data-max-pos="0" data-min-pos="-9100"
       style="width: 10000px; overflow: hidden; background: red; -webkit-transform: translate3d(0, 0, 0); -o-transform: translate3d(0, 0, 0); -webkit-transition-timing-function: cubic-bezier(.1, .25, .25, 1); -o-transition-timing-function: cubic-bezier(.1, .25, .25, 1); position: absolute; white-space: nowrap;">
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890
    1234567890 1234567890
  </div>
</div>

<br><br>

<div
    style="-webkit-backface-visibility: hidden; background: #ddd; width: 900px; height: 200px; margin: auto; font-size: 64px; overflow: hidden; position: relative;"
    id="wrap3">
  <div id="shaft3" data-max-pos="0" data-min-pos="-4500"
       style="-webkit-transform: translate3d(0, 0, 0); -o-transform: translate3d(0, 0, 0); -webkit-transition-timing-function: cubic-bezier(.1, .25, .25, 1); -o-transition-timing-function: cubic-bezier(.1, .25, .25, 1); position: absolute; white-space: nowrap;">
    <div style="position: absolute; left: 0; width: 900px; height: 200px; background: #ede;"></div>
    <div style="position: absolute; left: 900px; width: 900px; height: 200px; background: #bcd;"></div>
    <div style="position: absolute; left: 1800px; width: 900px; height: 200px; background: #eda;"></div>
    <div style="position: absolute; left: 2700px; width: 900px; height: 200px; background: #eaf;"></div>
    <div style="position: absolute; left: 3600px; height: 200px; background: #baf;"></div>
    <div style="position: absolute; left: 4500px; width: 900px; height: 200px; background: #dca;"></div>
  </div>
</div>

<br><br>



<div style="width: 2000px;">123</div>

</body>
</html>