<!DOCTYPE html>
<html>
<head>
  <title>Simple touch engine</title>
  <meta name="viewport" content="width=1000">
  <script src=jquery-1.7.2.min.js></script>

  <script>
    (function (window, document, $, undefined) {
    var TOUCH = 'ontouchstart' in window,
        $DOCUMENT = $(document);

      $(function () {

        /* Базовая функция для таскания и швыряния некого элемента.
         * Работает с событиями touchstart, touchmove, touchend на тач-девайсах
         * и mousedown, mousemove, mouseup. Блокирует многопальцевые жесты.
         * На тач-дейвасах может сохранить возможность прокрутки страницы в одном из направлений.
         * Имеет три колбека — onStart, onMove, onEnd, в которые (кроме onEnd) первым параметром отдаётся объект
         * события, для дальнешейго использования в скриптах.
         *
         * Пример использования:
         *   touch($('#shaft'), {
         *     onStart: function (e) { console.log(e.type) },
         *     onMove: function (e) { ... },
         *     onEnd: function (e) { ... },
         *     keepTouchScroll: 'y' // or 'x'
         *   });
         *
         * @param $el {jQuery} Джейквери-объект на котором будут отслеживаться события
         * @param options {Object} Объект с опциями
         * */
        function touch ($el, options) {
          var el = $el.get(0),
              onStartFn = options.onStart || $.noop,
              onMoveFn = options.onMove || $.noop,
              onEndFn = options.onEnd || $.noop,
              keepTouchScroll = options.keepTouchScroll,
              touchEnabledFLAG,
              checkedDirectionFLAG,
              movableFLAG,
              offset,
              width,
              height,
              startEvent;

          function onStart (e) {
            if (touchEnabledFLAG || (e.touches && e.touches.length > 1)) return;

            offset = $el.offset();
            width = $el.width();
            height = $el.height();

            checkedDirectionFLAG = false;
            movableFLAG = false;

            startEvent = e;

            onStartFn(e);

            touchEnabledFLAG = true;

            if (!TOUCH) {
              e.preventDefault();
            }
          }

          function onMove (e) {
            if (!touchEnabledFLAG
                || (e.pageX - offset.left > width
                || e.pageX - offset.left < 0
                || e.pageY - offset.top > height
                || e.pageY - offset.top < 0)
                || (e.touches && e.touches.length > 1)) {
              onEnd();
              return;
            }

            if (TOUCH && keepTouchScroll && !checkedDirectionFLAG) {
              var xShift = Math.abs(e.pageX - startEvent.pageX);
              var yShift = Math.abs(e.pageY - startEvent.pageY);
              var xWin = xShift - yShift >= 5;
              var yWin = yShift - xShift >= 5;

              $el.text(xWin + ' ' + yWin);
              if (xWin || yWin) {
                checkedDirectionFLAG = true;
                movableFLAG = (keepTouchScroll === 'y' && xWin) || (keepTouchScroll === 'x' && yWin);
              }

              if (!checkedDirectionFLAG || movableFLAG) {
                e.preventDefault();
              }
            } else if (!TOUCH || !keepTouchScroll || movableFLAG) {
              e.preventDefault();
              onMoveFn(e);
            }
          }

          function onEnd () {
            if (!touchEnabledFLAG) return;
            onEndFn();
            touchEnabledFLAG = false;
          }

          if (!TOUCH) {
            $el.on('mousedown', onStart);
            $DOCUMENT.on('mousemove', onMove);
            $DOCUMENT.on('mouseup', onEnd);
          } else {
            el.addEventListener('touchstart', onStart, false);
            el.addEventListener('touchmove', onMove, false);
            el.addEventListener('touchend', onEnd, false);
          }
        }

        function onShaftTouchStart (e) {
          console.log('onShaftTouchStart', e);
        }

        function onShaftTouchStart2 (e) {
          console.log('onShaftTouchStart2', e);
        }


        touch($('#shaft'), {
          onStart: onShaftTouchStart,
          keepTouchScroll: 'y'
        });

        touch($('#shaft2'), {
          onStart: onShaftTouchStart2,
          keepTouchScroll: 'x'
        });

      });
    })(window, document, jQuery)
  </script>
</head>
<body style="margin: 20px;">

<div style="background: #ddd; width: 900px; height: 200px; margin: auto; font-size: 64px;" id="shaft">
  mouse...
</div>

<br><br>

<div style="background: #ddd; width: 900px; height: 200px; margin: auto; font-size: 64px;" id="shaft2">
  mouse...
</div>

<div style="width: 2000px;">123</div>

</body>
</html>